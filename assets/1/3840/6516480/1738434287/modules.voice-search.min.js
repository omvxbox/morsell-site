if(Settings['module_voice-search']){var $voiceSearchTrigger=$(".js-search-voice-trigger"),$voiceSearchForm=$(".js-search-form"),$voiceSearchInput=$(".js-search-input");if(window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition,window.SpeechRecognition){var recognition=new SpeechRecognition;recognition.interimResults=!0,recognition.lang="ru-RU",recognition.addEventListener("result",_transcriptHandler),recognition.onerror=function(e){"no-speech"!=e.error&&"not-allowed"!=e.error||($voiceSearchTrigger.removeClass("is-active"),$voiceSearchInput.attr("placeholder",$voiceSearchTrigger.data('placeholder')))}}else $voiceSearchTrigger.remove();function listenStart(e){e.preventDefault(),$voiceSearchInput.attr("placeholder",$voiceSearchTrigger.data('placeholder')),$voiceSearchTrigger.addClass("is-active"),recognition.start()}function _parseTranscript(e){return Array.from(e.results).map(function(e){return e[0]}).map(function(e){return e.transcript}).join("")}function _transcriptHandler(e){var r=_parseTranscript(e);$voiceSearchInput.val(r),e.results[0].isFinal&&$voiceSearchForm.submit()}jQuery(document).ready(function(){$voiceSearchTrigger.on("click touch",listenStart)});}
;
